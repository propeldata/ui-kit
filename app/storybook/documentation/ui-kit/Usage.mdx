import { Canvas, Meta, Story, Source } from '@storybook/blocks'
import LinkTo from '@storybook/addon-links/react'
import { prettier } from '../../src/utils'
import * as CounterStories from '../../../../packages/ui-kit/src/components/Counter/Counter.stories'
import * as TimeSeriesStories from '../../../../packages/ui-kit/src/components/TimeSeries/TimeSeries.stories'

<Meta title="Getting started/Usage" />

# Usage

The Propel UI Kit components are available in two modes: "Connected" and "Static".

## Connected Mode

In the "Connected" mode, the component automatically fetches the data from the Propel API. You don't need a backend, to
configure a GraphQL client, or handle loading and error states.

To learn more about querying data with Propel, read the
[Metric query documentation](https://www.propeldata.com/docs/metrics).

For the Connected mode, you'll need to provide your Propel Application's access token to use Propel APIs. You can
authenticate and generate an access token by following the steps outlined in
[the Propel GraphQL Authentication guide](https://propeldata.com/docs/api/authentication#step-2-generate-an-access-token).

In this mode, the component will handle the loading and error states for you, making it even easier to use.

Here is an example using our <LinkTo kind="Components/Counter" story="overview">Counter</LinkTo> component:

<Canvas
  of={CounterStories.SingleValueStory}
  sourceState="shown"
  source={{
    language: 'tsx',
    transform: (code, context) => prettier(context.parameters.codeTemplate(code, context))
  }}
/>

## Static Mode

In the "Static" mode, the component will display the data you provide.

Let's take our <LinkTo kind="Components/TimeSeries" story="overview">TimeSeries</LinkTo> component as an example. If you
want to fetch the data on your own instead of delegating it to the library, you can do so using the following JavaScript
code:

<Canvas
  of={TimeSeriesStories.StaticStory}
  sourceState="shown"
  source={{
    language: 'tsx',
    transform: (code, context) => prettier(context.parameters.codeTemplate(code, context))
  }}
/>

You can customize the component using your own styles.
